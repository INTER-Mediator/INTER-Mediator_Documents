<!DOCTYPE html>
<!--
/*
 * INTER-Mediator Ver.@@@@2@@@@ Released @@@@1@@@@
 *
 *   Copyright (c) 2010-2018 INTER-Mediator Directive Committee, All rights reserved.
 *
 *   This project started at the end of 2009 by Masayuki Nii  msyk@msyk.net.
 *   INTER-Mediator is supplied under MIT License.
 */
-->
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../../lib/css/normalize.min.css" rel="stylesheet" media="screen">
    <link href="../../lib/css/style.min.css" rel="stylesheet" media="screen">
    <link href="../../lib/css/nav.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="../../lib/css/styles/tomorrow-night.css">
    <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <script src="../../lib/js/pagebuilder-r2.js"></script>
    <script src="../../lib/pagebuilder-r2.php"></script>
    <script src="../../lib/highlight.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad()
    </script>
    <style>
        td {
            text-align: left;
        }

        .keyword {
            white-space: nowrap;
        }

        .subtitle {
            font-size: 70%;
            color: gray;
        }
    </style>
</head>
<body class="docs" data-page-title="for-developers">
<div class="container clearfix">
    <div class="page-title">
        <h1 id="pageTitle"></h1>
    </div>
    <ol id="breadcrumb" class="breadcrumb clearfix">
    </ol>
    <div class="docs-sidebar sticky clearfix">
        <nav>
            <ul id="pageIndex">
            </ul>
        </nav>
    </div>
    <article>
        <section>
            <h1>はじめに</h1>
            <p class="lead">
                定義ファイルに記述するIM_Entry関数の引数に、データベースに関する情報を与えておきます。4つの引数があり、うち3つは配列を指定します。配列の内容を記載します。以下の表で、次元の列にキーワードがあれば、「'キーワード'
                => '値' 」で該当する値を与えます。次元が「（なし）」というのは、その次元では、単に要素が並ぶということを意味します。サンプルファイルの例などを見ながら解読してください。</p>
        </section>
        <section>
            <h1>第1引数、テーブルとそれに関連した属性</h1>
            <p>
                テーブルと、テーブル間を関連づけるフィールドを指定します。この引数の第2次元にまとめられた1つの配列の設定を「コンテキスト定義」と呼ぶことにします。つまり、name、keyなどのキーを持った連想配列の1つ1つがコンテキスト定義です。もちろん、コンテキスト定義は複数を定義することが可能です。ここでのnameが、ターゲット指定のテーブル名で使用します。テーブル間の結合における相手のテーブル名がないと思われるかもしれませんが、相手のテーブル名は、ページファイル側の記述で自動的に決まってきます。</p>
            <div class="table">
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    コンテキスト名とエンティティ情報
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'name'</td>
                        <td>
                            テーブル名[必須]。'view'がなければすべての処理を適用する「テーブル名」、'view'があれば書き込みや更新処理のときの「テーブル名」
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'table'</td>
                        <td>
                            指定すると更新時の「テーブル名」に使用される。指定しないと、nameで指定した名前のテーブルに書き込む
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'view'</td>
                        <td>
                            指定すると読み込みのときの「テーブル名」に使用される。指定しないと、nameで指定した名前のテーブルから読み込む
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'count'</td>
                        <td>
                            通常はレコード数のカウントをviewキーで指定したエンティティに対して行うが、この定義を追加すると個数を求めるときだけviewの代わりにcountで指定したエンティティを使用する。ビューの応答が遅い場合、同一条件で結果が得られるテーブルを指定できる場合にはパフォーマンス向上が期待できる
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'source'</td>
                        <td>
                            1ページに複数のコンテキストが展開されている時、あるコンテキストでのレコード作成や削除結果を、同一のテーブルから構成された別のコンテキストにも反映させるための設定。この名前が同じコンテキスト群では、レコードの作成や削除結果が同期される。指定がなければ、table、view、nameの順にさかのぼって設定を得る。ビューをviewキーで指定したときにその主要テーブルを指定するような場合に使用する。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'key'</td>
                        <td>
                            レコードを特定するためのキーフィールドの名前を指定する。表示のみの場合には不要だが、更新処理にはこのフィールドは必要。単一のフィールドの指定しかできない。FileMaker
                            Serverでは「-recid」と指定することで、システムが管理するレコード識別のための値を利用できる。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'sequence'</td>
                        <td>
                            PostgreSQLにおいて、レコード追加を行うためには、シーケンスを利用してキーフィールドに連番を設定する必要がある。そのシーケンス名をここで指定をする。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'cache'</td>
                        <td>
                            trueを指定するとキャッシュが機能する。同一ページ内で、１つのコンテキストを複数箇所で利用する場合、それぞれが同一の検索結果の場合に利用できる。例えば、ポップアップメニューの選択など。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'data'</td>
                        <td>
                            読み込み時のみ、サーバーへのデータ処理は行わず、この値がそのままデータベースから得られたものとしてペー上に展開する。データ形式は、1レコードを示す連想配列を、さらに配列に含めたもの。編集可能なコンテキストでは利用しないのが原則とする。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'appending-data'</td>
                        <td>
                            読み込み時に、サーバーへクエリー結果の末尾に、さらにこの値を追加する。データ形式は、1レコードを示す連想配列を、さらに配列に含めたもの。
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    レコード繰り返しとページング
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'records'</td>
                        <td>
                            1ページに何レコード分表示するか。最初のテーブルの設定のみ有効。未指定の場合は100000000、つまり十分に大きな値
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'maxrecords'</td>
                        <td>
                            1ページ内の最大表示レコード数。INTERMediator.pagedSizeの値を調整することで1ページ内の表示レコード数を変更できるが、その際にこのキーで指定した値を超えて表示することはできない。未指定の場合は100000000、つまり十分に大きな値
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'paging'</td>
                        <td>recordsで指定したレコード数ずつ表示するとき、前後のページに移動するナビゲーションを表示する場合、trueを指定する。既定値はfalse</td>
                    </tr>
                    <tr>
                        <td class="keyword">'soft-delete'</td>
                        <td>
                            コンテキストに対する削除において、論理削除を行う。検索時には、論理的に削除されたレコードは検索対象外とする。値をtrueにすると、レコード削除時に、deleteフィールドに1を代入する。deleteフィールドのタイプは数値を想定している。delete以外のフィールドを利用したい場合には、値をフィールド名にする。
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    リレーションシップ、検索条件、並べ替え、初期値
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th>キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="4" class="keyword">'relation'</td>
                        <td rowspan="4" class="keyword">(なし)</td>
                        <td class="keyword">'foreign-key'</td>
                        <td>
                            リレーションの外部キーフィールド名（この設定は事実上データ取り出し時のみ有効）
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'join-field'</td>
                        <td>
                            外部キーフィールドに対応するテーブル側の関連フィールド
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'operator'</td>
                        <td>
                            外部キーフィールドと対応するフィールドの比較演算子
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'portal'</td>
                        <td>
                            FileMaker Serverを利用しているときに、このコンテキストのデータを、親コンテキストのレイアウト上にあるポータルから取得する場合にtrueを値に指定する
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" class="keyword">'query'</td>
                        <td rowspan="3" class="keyword">(なし)</td>
                        <td class="keyword">'field'</td>
                        <td>検索条件のフィールド名（この設定はデータ取り出し時のみ有効）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'value'</td>
                        <td>検索値</td>
                    </tr>
                    <tr>
                        <td class="keyword">'operator'</td>
                        <td>検索値の解釈</td>
                    </tr>
                    <tr>
                        <td rowspan="2" class="keyword">'sort'</td>
                        <td rowspan="2" class="keyword">(なし)</td>
                        <td>'field'</td>
                        <td>ソート条件のフィールド名（この設定はデータ取り出し時のみ有効）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'direction'</td>
                        <td>昇順か降順か</td>
                    </tr>
                    <tr>
                        <td rowspan="2" class="keyword">'default-values'</td>
                        <td rowspan="2" class="keyword">(なし)</td>
                        <td class="keyword">'field'</td>
                        <td>新規レコード作成時、およびレコードコピー時の初期値指定のフィールド名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'value'</td>
                        <td>初期値</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    計算プロパティ
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th>キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="2" class="keyword">'calculation'</td>
                        <td rowspan="2" class="keyword">(なし)</td>
                        <td class="keyword">'field'</td>
                        <td>計算結果を表示するリンクノードのターゲット指定。コンテキスト名は現在のコンテキスト名を使うため指定しない。属性やスタイル等の指定は可能</td>
                    </tr>
                    <tr>
                        <td class="keyword">'expression'</td>
                        <td><a href="exp.html" target="_blank">計算式</a>。同一コンテキストのフィールド参照はフィールド名のみ記述する。他のコンテキストのフィールド参照は「コンテキスト名@フィールド名」の形式で記述する
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    Post Onlyモードの動作定義
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'post-reconstruct'</td>
                        <td>
                            trueなら、入力型フォームにおいて、登録ボタンを押した後にページの再合成を行う。post-dismiss-messageが指定されていれば、4秒後待って再合成する。falseあるいは指定なしなら何もしない
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'post-dismiss-message'</td>
                        <td>
                            入力型フォームにおいて、登録ボタンを押した後に、ボタンを消してここに記述したメッセージの文字列を表示する。文字列はSPANタグでclass属性が「IM_POSTMESSAGE」となる。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'post-move-url'</td>
                        <td>
                            入力型フォームにおいて、登録ボタンを押した後に、ここで指定したURLにページを移動させる。指定しない場合にはページ移動はない。post-dismiss-messageが指定されていれば、4秒後に移動する
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    ユーザーインタフェース生成
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="2">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th>キー</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'repeat-control'</td>
                        <td></td>
                        <td>
                            繰り返し表示する部分に、レコードの追加や削除の機能を追加する。値には以下の文字列を与える。confirmがあれば確認ダイアログが表示される。複数を指定する場合はそれぞれの文字列を空白で区切って書き並べる。
<table>
<tr><th>使用できるキーワード</th><th>動作</th><th>説明</th></tr>
<tr><td>insert</td><td>レコード追加ボタン</td><td>レコード追加ボタンを、レコードリストの直下、あるいは1レコード単位の場合はページネーションバーに表示する</td></tr>
<tr><td>insert-top</td><td>レコード追加ボタン</td><td>同上だが、レコードリストの直上にボタンが表示される</td></tr>
<tr><td>insert-confirm</td><td>レコード追加ボタン</td><td>ボタンを押すと、本当にレコード作成して良いかをダイアログボックスでたずねる</td></tr>
<tr><td>insert-top-confirm</td><td>レコード追加ボタン</td><td>同上、かつボタンはリストの場合その直上に配置</td></tr>
<tr><td>delete</td><td>レコード削除ボタン</td><td>レコード削除ボタンをリピータの最後の要素に追加する</td></tr>
<tr><td>delete-confirm</td><td>レコード削除ボタン</td><td>ボタンを押すと、本当にレコード削除して良いかをダイアログボックスでたずねる</td></tr>
<tr><td>copy</td><td>レコード複製ボタン</td><td>レコード複製ボタンをリピータの最後の要素に追加する</td></tr>
<tr><td>copy-confirm</td><td>レコード複製ボタン</td><td>ボタンを押すと、本当にレコード複製して良いかをダイアログボックスでたずねる</td></tr>
<tr><td>copy-xxxx</td><td>レコード複製ボタン</td><td>xxxxには関連レコードのコンテキストを指定する。これにより、関連レコード群も外部キーを考慮して複製される</td></tr>
<tr><td>copy-confirm-xxxx</td><td>レコード複製ボタン</td><td>ボタンを押すと、本当にレコード複製して良いかをダイアログボックスでたずねる</td></tr>
</table>
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'navi-control'</td>
                        <td></td>
                        <td>
                            2つのコンテキストを利用して、マスター/ディテール形式のユーザインタフェースを構築する。マスター側は複数のレコードを表示し、それぞれ対応するディテール側を表示するボタンが追加される。ディテール側では1レコードを表示する。2つのコンテキストは、原則として同一のテーブルを元にした異なるコンテキストである必要がある。FileMaker Serverを利用する時には、detailを指定したコンテキストのidキーの値は「-recid」にする必要がある。さらに、コンテキストを次々に移動できるステップ動作をするコンテキストも定義できる。
<table>
<tr><th>使用できるキーワード</th><th>動作</th><th>説明</th></tr>
<tr><td>master</td><td>マスター側のコンテキスト</td><td>マスターとディテールを同時に表示</td></tr>
<tr><td>master-hide</td><td>マスター側のコンテキスト</td><td>ディテール側に移動時にマスター側は非表示</td></tr>
<tr><td>master-nonavi</td><td>マスター側のコンテキスト</td><td>マスターとディテールを同時に表示</td></tr>
<tr><td>master-nonavi-hide</td><td>マスター側のコンテキスト</td><td>ディテール側に移動時にマスター側は非表示</td></tr>
<tr><td>master-fullnavi</td><td>マスター側のコンテキスト</td><td>マスターとディテールを同時に表示</td></tr>
<tr><td>master-fullnavi-hide</td><td>マスター側のコンテキスト</td><td>ディテール側に移動時にマスター側は非表示</td></tr>
<tr><td>detail</td><td>ディテール側のコンテキスト</td><td>detail-topと同じ動作</td></tr>
<tr><td>detail-top</td><td>ディテール側のコンテキスト</td><td>マスターに戻るボタンを上部に表示（マスター側がmaster-hide）</td></tr>
<tr><td>detail-bottom</td><td>ディテール側のコンテキスト</td><td>マスターに戻るボタンを下部に表示（マスター側がmaster-hide）</td></tr>
<tr><td>detail-update</td><td>ディテール側のコンテキスト</td><td>detail-topと同じ動作に加えて、マスター側を更新</td></tr>
<tr><td>step</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時に見えている</td></tr>
<tr><td>step-hide</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時には見えていない</td></tr>
<tr><td>step-nonavi</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時に見えている</td></tr>
<tr><td>step-nonavi-hide</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時には見えていない</td></tr>
<tr><td>step-fullnavi</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時に見えている</td></tr>
<tr><td>step-fullnavi-hide</td><td>ステップ動作の1つのコンテキスト</td><td>ページ表示時には見えていない</td></tr>
<tr><th>付加文字列</th><th>適用先</th><th>意味</th></tr>
<tr><td>-hide</td><td>マスター</td><td>ディテール側に切り替えるとマスターは非表示</td></tr>
<tr><td>-hide</td><td>ステップ</td><td>ページ表示時には見えていない</td></tr>
<tr><td>-nonavi</td><td>マスター及びステップ</td><td>自動化のナビゲーションは表示しない、背景応答もしない、デスクトップとモバイルは同一動作</td></tr>
<tr><td>-fullnavi</td><td>マスター及びステップ</td><td>あらゆるナビゲーションを表示し背景応答もする、デスクトップとモバイルは同一動作</td></tr>
</table>
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'navi-title'</td>
                        <td></td>
                        <td>ターゲット指定が「_@navi_title」の要素に、このキーで指定した文字列を設定する。</td>
                    </tr>
                    <tr>
                        <td class="keyword">'before-move-nextstep'</td>
                        <td></td>
                        <td>ステップのセルをタップした時に呼び出されるメソッド名。INTERMediatorOnPageオブジェクトに、ここで指定した名前のメソッドを定義する</td>
                    </tr>
                    <tr>
                        <td class="keyword">'just-move-thisstep'</td>
                        <td></td>
                        <td>ステップのエリアを生成した直後、つまりデータベース処理をしてページ合成が終わった直後に呼び出されるメソッド名。INTERMediatorOnPageオブジェクトに、ここで指定した名前のメソッドを定義する</td>
                    </tr>
                    <tr>
                        <td class="keyword">'just-leave-thisstep'</td>
                        <td></td>
                        <td>このステップから別のステップに以降する直前に呼び出されるメソッド名。INTERMediatorOnPageオブジェクトに、ここで指定した名前のメソッドを定義する</td>
                    </tr>
                    <tr>
                        <td rowspan="5" class="keyword">'button-names'</td>
                        <td class="keyword">'insert'</td>
                        <td>repeat-controlに「insert」を指定したときに追加されるボタンのボタン名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'delete'</td>
                        <td>repeat-controlに「delete」を指定したときに追加されるボタンのボタン名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'copy'</td>
                        <td>repeat-controlに「copy」を指定したときに追加されるボタンのボタン名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'navi-detail'</td>
                        <td>navi-controlに「master」あるいは「step」を指定したときに追加されるボタンのボタン名。マスター側に追加されるディテール側へ移動するボタン、あるいは次のステップに移動するためのボタンの名前</td>
                    </tr>
                    <tr>
                        <td class="keyword">'navi-back'</td>
                        <td>navi-controlに「detail」を指定したときに追加されるボタンのボタン名。ディテール側に追加されるマスター側へ移動するボタンの名前</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    バリデーション
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="4" class="keyword">'validation'</td>
                        <td rowspan="4" class="keyword">(なし)</td>
                        <td class="keyword">'field'</td>
                        <td>データ確認を行うフィールド名（バリデーションはVer.2.1以降で実装）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'rule'</td>
                        <td>
                            確認処理。JavaScriptの式を記述する。コンポーネントの値は変数value、ノードへの参照は変数targetに入っているものとして、式を組み立てることができる。式の結果がtrueならそのまま処理を進めるが、falseならmessageの文字列をダイアログボックスで表示して、コンポーネントの値を元に戻す
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'message'</td>
                        <td>正しくない場合に表示するメッセージ（ruleがfalseのときに表示される）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'notify'</td>
                        <td>
                            'inline'なら直後、'end-of-sibling'なら兄弟ノードの最後にメッセージのテキストを追加する。このとき、ノードのクラス名は'_im_alertmessage'となる。これ以外の表記あるいは、notifyを省略すると、ダイアログボックスで表示される。
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    合成処理やデータベース処理の拡張
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'post-repeater'</td>
                        <td>ページ合成時に1つのリピータの処理が終わった後に呼び出される関数名を記述する。その関数自体は、INTERMediatorOnPageオブジェクトのメソッドとして定義する。</td>
                    </tr>
                    <tr>
                        <td class="keyword">'post-enclosure'</td>
                        <td>ページ合成時に1つのエンクロージャーの処理が終わった後に呼び出される関数名を記述する。その関数自体は、INTERMediatorOnPageオブジェクトのメソッドとして定義する。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'extending-class'</td>
                        <td>データアクセス時にサーバー側で処理プログラムを追加するクラスのクラス名を指定する</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    スクリプト実行
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="4" class="keyword">'script'</td>
                        <td rowspan="4" class="keyword">(なし)</td>
                        <td class="keyword">'db-operation'</td>
                        <td>
                            データベース処理の前後に行う処理の指定。スクリプトを実行する場面で、値は'read', 'update', 'create', 'delete'のいずれか
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'situation'</td>
                        <td>
                            スクリプトの実行を行うタイミングで、'pre', 'presort', 'post'のいずれかの値を取る（'presort'はFileMaker Serverのみサポート）
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'definition'</td>
                        <td>
                            MySQLは指定したSQLコマンドを実行、FileMaker Serverはスクリプト名を指定。（FileMaker
                            Serverでforeign-keyの指定されたテーブルの読み込み時の設定はすべて無視される）
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'parameter'</td>
                        <td>FileMaker Serverを利用しているときにスクリプト引数を指定する。バージョン5.4以降で利用可能。</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    FileMakerでのグローバル変数設定
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="3" class="keyword">'global'</td>
                        <td rowspan="3" class="keyword">(なし)</td>
                        <td class="keyword">'db-operation'</td>
                        <td>
                            設定する場面で、値は 'read', 'update', 'create', 'delete'のいずれか（グローバルの設定はFileMaker Serverのみ）
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'field'</td>
                        <td>グローバルフィールド名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'value'</td>
                        <td>グローバルフィールドに与える値</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    認証・認可とセキュリティ
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="9" class="keyword">'authentication'</td>
                        <td class="keyword">'media-handling'</td>
                        <td></td>
                        <td>メディアアクセス時の認証を通すためのクッキー情報を、このコンテキストの読み出し時にクライアントに送り込む。必要なときに値にtrueを指定する</td>
                    </tr>
                    <tr>
                        <td rowspan="4" class="keyword">'all'</td>
                        <td class="keyword">'user'</td>
                        <td>
                            すべての操作について、このコンテキストを利用可能なユーザを配列で指定。この記述がなければすべての認証ユーザにアクセス権
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'group'</td>
                        <td>
                            すべての操作について、このコンテキストを利用可能なグループを配列で指定。この記述がなければすべてのグループにアクセス権
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'target'</td>
                        <td>
                            省略あるいは'table'なら、テーブル全体に対する権限の設定、'field-user'あるいは'field-group'ならレコードごとに権限を指定できる
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'field'</td>
                        <td>
                            'target'に'field-user'あるいは'field-group'に指定した場合、ユーザ名やグループ名を指定するフィールドのフィールド名
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'read'</td>
                        <td class="keyword">(allと同様）</td>
                        <td>クエリーの操作について、このコンテキストに関する設定を行う</td>
                    </tr>
                    <tr>
                        <td class="keyword">'update'</td>
                        <td class="keyword">（allと同様）</td>
                        <td>更新の操作について、このコンテキストに関する設定を行う</td>
                    </tr>
                    <tr>
                        <td class="keyword">'create'</td>
                        <td class="keyword">（allと同様）</td>
                        <td>新規レコード作成の操作について、このコンテキストに関する設定を行う</td>
                    </tr>
                    <tr>
                        <td class="keyword">'delete'</td>
                        <td class="keyword">（allと同様）</td>
                        <td>レコード削除の操作について、このコンテキストに関する設定を行う。ただし、targetとfieldは無視してテーブルに対する設定のみを利用</td>
                    </tr>
                    <tr>
                        <td class="keyword">'protect-writing'</td>
                        <td></td>
                        <td></td>
                        <td>この配列に指定したフィールド名に対する更新処理を禁止する</td>
                    </tr>
                    <tr>
                        <td class="keyword">'protect-reading'</td>
                        <td></td>
                        <td></td>
                        <td>この配列に指定したフィールド名から読み出したデータをクライアントに送る事を禁止する</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    ファイルアップロード
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">キー</th>
                        <th class="keyword">インデックス</th>
                        <th class="keyword">下位のキー</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td rowspan="3" class="keyword">'file-upload'</td>
                        <td rowspan="3" class="keyword">（なし）</td>
                        <td class="keyword">'field'</td>
                        <td>コンテキスト内のここで指定したフィールドに対してファイルアップロードのコンポーネントが設定されている場合</td>
                    </tr>
                    <tr>
                        <td class="keyword">'context'</td>
                        <td>
                            この指定があると、指定したコンテキストのpathフィールドにファイルパスを値として指定する新規レコードを作成する。こちらのコンテキストとのリレーションが設定されていれば正しく外部キーが設定される
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'container'</td>
                        <td>アップロードしたファイルの置き場所を指定する。指定可能なキーワードは、"FileSystem"、"FileMakerContainer"、"S3"で、指定なしの場合は"FileSystem"が利用される。過去との互換性のために、値がTRUEの場合には"FileMakerContainer"が選択される。Amazon S3の場合は、params.phpファイルへの設定が必要になります。FileMakerについては、FileMaker Serverのバージョン13以降が必要、かつデータベースのフィールドオプションにおいて［入力値の自動化］オプションをあらかじめ設定しておく必要があります。詳細は<a href="/ja/for-programmers/jscomponent.html">ファイルのアップロードコンポーネント</a>の「FileMakerのオブジェクトフィールドにファイルをアップロードする」を参照
                        </td>
                    </tr>
                    </tbody>
                </table>
                <h3>Amazon S3の場合にparams.phpファイルに指定する変数</h3>
                <table>
                    <thead>
                    <tr>
                        <th>変数名</th>
                        <th>既定値</th>
                        <th>指定内容</th>
                    </tr>
                    <thead>
                    <tbody>
                     <tr>
                        <td>$accessRegion</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>接続するAWSのエンドポイントを指定する。東京なら"ap-northeast-1"。一覧は<a href="https://docs.aws.amazon.com/general/latest/gr/rande.html" target="_blank">こちら</a></td>
                    </tr>
                     <tr>
                        <td>$rootBucket</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>S3のバケット名</td>
                    </tr>
                     <tr>
                        <td>$applyingACL</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>オブジェクトをPutObjectメソッドで書き込むときに指定するオブジェクトのACL。指定できる値は次の通り：private、public-read、public-read-write、authenticated-read、aws-exec-read、bucket-owner-read、bucket-owner-full-control。例えば、アップロードしたファイルが即座に誰でも参照できるようにした場合はpublic-read、INTER-Mediatorでアクセス権管理をする場合にはbucket-owner-read。</td>
                    </tr>
                     <tr>
                        <td>$s3AccessProfile</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>S3へのアクセスのための認証情報としては、一般にIAMを使ってユーザーを作成し、AmazonS3FullAccessのポリシーをユーザあるいはグループに設定し、そのユーザに対するアクセスキーとシークレットを生成し、それらを利用します。認証情報を記録するために、<a href="https://docs.aws.amazon.com/ja_jp/sdk-for-php/v3/developer-guide/guide_credentials_profiles.html" target="_blank">AWSのクライアントのプロファイル</a>を利用する場合は、ここにプロファイル名を記入します。変数がないあるいはプロファイル名が""など、プロファイル名が指定されていない場合、以下のアクセスキーとシークレットを利用します。このparams.phpファイルにアクセスキーとシークレットを記述する方法については、パブリックなレポジトリではもちろん、共用レポジトリでも問題になるかもしれません。つまり、レポジトリ外にセンシティブな情報を記録する方法として、プロファイルを活用できるようになっています。</td>
                    </tr>
                     <tr>
                        <td>$s3AccessKey</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>$s3AccessProfileを参照してください。アクセスキーを直接指定する場合にはここに指定しますが、こちらの値を使うには、$s3AccessProfileの値を""にします。</td>
                    </tr>
                     <tr>
                        <td>$s3AccessSecret</td>
                        <td style="white-space:nowrap">(設定なし)</td>
                        <td>$s3AccessProfileを参照してください。シークレットを直接指定する場合にはここに指定しますが、こちらの値を使うには、$s3AccessProfileの値を""にします。</td>
                    </tr>
                     <tr>
                        <td>$s3urlCustomize</td>
                        <td>TRUE</td>
                        <td>アップロード後にオブジェクトにアクセスするためのURLがS3より返されます。ファイルの読み出しを無制限に行う場合にはそのままのURLをフィールドに保存しますが、INTER-Mediatorのアクセス権設定を有効にするために、MediaAccessクラスを使う場合（「定義ファイル.php?media=URL」でメディア参照ができる仕組み）は、この設定をTRUEにします。すると、S3から得られたURLの冒頭のhttps://をs3://に変えます。変わったURLをそのままフィールドに保存し、mediaパラメータの値として指定すると、S3へはGetObjectメソッドを使って認証アクセスを行うようになります。つまり、INTER-Mediatorでアクセス権の管理を完全に行なっている状態になっています。</td>
                    </tr>
                   </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    データベース接続設定
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'db-class'</td>
                        <td>
                            このコンテキストで使うデータアクセスクラスの名前（例：PDO、FileMaker_FX、FileMaker_DataAPI）この指定がなければ、IM_Entry関数の第3引数あるいはparams.phpの値が使われます。以下、'datatype'まで同様
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'dsn'</td>
                        <td>[PDO]このコンテキストで使う接続時に指定するDSN</td>
                    </tr>
                    <tr>
                        <td class="keyword">'option'</td>
                        <td>[PDO]このコンテキストで使うオプション指定。array型で指定</td>
                    </tr>
                    <tr>
                        <td class="keyword">'database'</td>
                        <td>[FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うデータベース名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'user'</td>
                        <td>[PDO][FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うユーザ名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'password'</td>
                        <td>[PDO][FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うパスワード</td>
                    </tr>
                    <tr>
                        <td class="keyword">'server'</td>
                        <td>[FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うサーバーアドレス（例：127.0.0.1）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'port'</td>
                        <td>[FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うサーバーポート（例：80）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'protocol'</td>
                        <td>[FileMaker_FX][FileMaker_DataAPI]このコンテキストで使うサーバーへの接続プロトコル（例：HTTP）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'datatype'</td>
                        <td>[FileMaker_FX]このコンテキストで使うサーバーがサポートするデータ形式（例：FMPro12）</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    メール送信
                </h2>
                <p>メール送信については、<a href="sendmail.html" target="_blank">メール送信(Ver.5)</a>あるいは<a href="sendmail.html" target="_blank">メール送信(Ver.6)</a>のページに記載しました。
                <p>Slackによるメッセージングについては、<a href="slack.html" target="_blank">Slackにメッセージを追加する</a>のページに記載しました。

                 <h2>
                    <div class="subtitle">[第1引数, コンテキスト定義]</div>
                    複雑なSQL文によるビュー生成
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    <thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'aggregation-select'</td>
                        <td rowspan="3">
                            PDOのデータベースクラスのみで利用できる。これらの3つの設定と、sort、queryの設定を加えて、集計処理などのSQLを構成する。このコンテキストは読み出しのみとなる。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'aggregation-from'</td>
                    </tr>
                    <tr>
                        <td class="keyword">'aggregation-group-by'</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <p>認証についは別項目「ユーザ認証とアクセス権の動作について」も参照してください。</p>
            <p>'relation'、'query'、'sort'、'script'については、配列の配列を指定します。サンプルのソース等で具体例を見てください。</p>
            <p>それぞれのパラメータの解釈は、データベースドライバによって異なる場合があります。</p>
        </section>
        <section>
            <h1>第2引数、オプション設定</h1>
            <p>こちらは、「定義ファイルのオプション設定」と呼ぶことにします。該当する設定がparams.phpでも設定できる場合はその変数名も記載しています。その変数名でparams.phpを検索すれば、コメント等で記述例があるはずです。</p>
            <div class="table">
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    各種動作設定
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'separator'</td>
                        <td>テーブル名とフィールド名を区切る文字（既定値は「@」）</td>
                    </tr>
                    <tr>
                        <td class="keyword">'transaction'</td>
                        <td>
                            編集可能コンポーネントの変更時の書き戻しについて、'none'なら行わない、'automatic'ならchangeイベントが発生するたびに書き戻す。省略するとautomaticが指定されたものとみなす
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'media-root-dir'</td>
                        <td>
                            メディアアクセスに対して定義ファイルにリダイレクトの設定をWebサーバーで行う。そうすれば、この設定に指定したディレクトリにある画像などのメディアファイルを読み出す。
                        </td>
                    </tr>
                    <tr>
                        <td class="keyword">'credit-including'</td>
                        <td>INTER-Mediatorのクレジットをページ末尾に表示するのが通常の動作であるが、このキーにHTMLのid属性値を指定すると、そのタグ要素の内部の末尾にクレジットを付加する。他に末尾に付与する仕組みを使うような場合の回避策</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    アプリケーションのロカール
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
<th>params.phpで変数名</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'app-locale'</td>
                        <td>アプリケーション全体の言語およびカントリーコード（例えば、en、ja_JP）。これがあれば、ブラウザーのカントリーコードよりも優先される</td>
<td>$appLocale</td>
                    </tr>
                    <tr>
                        <td class="keyword">'app-currency'</td>
                        <td>通貨に関する国コード（例えば、US、JP）。指定なしの場合、app-localeの指定を利用</td>
<td>$appCurrency</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    テーマ
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th>キー</th>
                        <th>値</th>
<th>params.phpで変数名</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'theme'</td>
                        <td>使用するテーマ名。省略するとdefaultを使用。INTER-Mediatorに付属するテーマセットは他に最小限のleast、以前のバージョンの初期設定に近いthosedaysがある</td>
<td>$themeName</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    ローカルコンテキストの初期値
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
<th rowspan="2">params.phpで変数名</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                        <th class="keyword">第3次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="keyword" rowspan="2">'local-context'</td>
                        <td class="keyword" rowspan="2">（なし）</td>
                        <td class="keyword">'key'</td>
                        <td>ローカルコンテキストのキー（_@以降のキーワード）</td>
<td rowspan="2">$valuesForLocalContext</td>
                    </tr>
                    <tr>
                        <td class="keyword">'value'</td>
                        <td>コンテキストの初期値</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    エイリアス
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                        <th class="keyword">第3次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="keyword">'aliases'</td>
                        <td>エイリアス名</td>
                        <td>置き換える定義</td>
                        <td>エイリアスに対応する値。この値は正しい1つのターゲット指定である必要がある。この指定があれば、ターゲット指定の代わりに、エイリアス名をリンクノードに指定できる。</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    フォーマッター（サーバーサイドでの値変換）
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                        <th class="keyword">第3次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td rowspan="3" class="keyword">'formatter'</td>
                        <td rowspan="3" class="keyword">(なし)</td>
                        <td class="keyword">'field'</td>
                        <td>データコンバータを適用するフィールド名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'converter-class'</td>
                        <td>データコンバータクラス名</td>
                    </tr>
                    <tr>
                        <td class="keyword">'parameter'</td>
                        <td>コンバータクラスに与えるパラメータ</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    ブラウザの判定
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="3">配列指定</th>
                        <th rowspan="2">値</th>
<th rowspan="2">params.phpで変数名</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                        <th class="keyword">第3次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td rowspan="2" class="keyword">'browser-compatibility'</td>
                        <td rowspan="2" class="keyword">(なし)</td>
                        <td>文字列</td>
                        <td>キーにブラウザを示す文字列（safari,
                            msieなど）を指定し、値にはバージョン番号を指定する。バージョン番号の後に+や-をつけて、以上あるいは以下をのバージョンを示すことができる
                        </td>
<td rowspan="2">$browserCompatibility</td>
                    </tr>
                    <tr>
                        <td>配列</td>
                        <td>要素にはキーにOSを指定し、その要素に前の行に説明のあるバージョン番号とプラス／マイナス記号を指定する。</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>
                    認証・認可
                </h2>
                <table>
                    <thead>
                    <tr>
                        <th colspan="2">配列指定</th>
                        <th rowspan="2">値</th>
                        <th rowspan="2">params.phpで変数名</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td rowspan="12" class="keyword">'authentication'</td>
                        <td class="keyword">'user'</td>
                        <td>
                            利用可能なユーザを配列で指定。この記述がなければすべてのユーザにアクセス権。データベースのネイティブユーザで認証する場合には、値を「array('database_native')」と指定する。
                        </td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'group'</td>
                        <td>
                            利用可能なグループを配列で指定。この記述がなければすべてのグループにアクセス権
                        </td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'user-table'</td>
                        <td>ユーザ情報が保存されているテーブル名。省略すると'authuser'</td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'group-table'</td>
                        <td>ユーザ情報が保存されているテーブル名。省略すると'authgroup'</td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'corresponding-table'</td>
                        <td>ユーザとグループが対応づけられている情報が保存されているテーブル名。省略すると'authcor'</td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'challenge-table'</td>
                        <td>チャレンジが保存されているテーブル名。省略すると'issuedhash'</td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'authexpired'</td>
                        <td>認証が自動的に継続される時間を秒数で指定する。省略すると'3600'（1時間）。バージョン4.4以降では、0を指定すると有効期限はWebブラウザー終了時まで</td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'storing'</td>
                        <td>
                            認証情報のクライアントへの保存を指定。'cookie'ならPathを指定しないでクッキーに保存（既定値）、'cookie-domainwide'ならドメイン全体で共有できるようにクッキーに保存、'session-storage'ならブラウザのセッションストレージに保存、'none'ならクッキーに保存しない
                        </td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'realm'</td>
                        <td>
                            認証領域名。ログインパネルの上部に表示される。また、認証情報を記憶するクッキーの名称の末尾に付与される。
                        </td><td></td>
                    </tr>
                    <tr>
                        <td class="keyword">'email-as-username'</td>
                        <td>
                            trueを指定すると、authuserテーブルのusernameと同時にemailフィールドも検索する。つまり、電子メールアドレスでの認証が可能になる。既定値はfalse
                        </td>
<td>$emailAsAliasOfUserName</td>
                    </tr>
                    <tr>
                        <td class="keyword">'issuedhash-dsn'</td>
                        <td>
                            issuedhashテーブルに対するDSNを指定する。たとえば、FileMakerデータベースで、issuedhashテーブルをSQLiteで運用する場合に使える
                        </td>
<td>$issuedHashDSN</td>
                    </tr>
                    <tr>
                        <td class="keyword">'password-policy'</td>
                        <td>パスワード変更時に適用されるパスワードポリシー。useAlphabet useNumber useUpper useLower usePunctuation length(10)
                            notUserNameの各単語をスペースで区切って指定する。useAlphabetはアルファベットを使用していないといけなくする。その他、同様に単語から意味が分かるはずである。length(10)はパスワードは10文字以上にする必要があるという意味で、(
                            ) 内には任意の数値を記述できる。
                        </td>
<td>$passwordPolicy</td>
                    </tr>
                    <tr>
                        <td class="keyword">'media-context'</td>
                        <td></td>
                        <td>
                            メディアアクセスに認証を設定するとき、ここで指定したコンテキストにアクセスしたときにメディアの認証用のトークンをクライアントに届ける。このトークンをクライアントが持つ事で、メディアプロキシが認証される（Ver.6ではこの指定は不要になる予定）
                        </td><td></td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>CSVファイル等からのインポート
                </h2>
                <p>ファイルのインポートを行うユーザーインタフェースは『<a href="manual.html">INTER-MediatorによるWebアプリケーションの概要</a>』にある『入力フォーム型ページの作成』に従ったページを作成してください。その時、ファイルアップロードを受け付ける要素で、deta-im属性を「コンテキスト@_im_csv_upload」にします。@以下は固定のキーワードです。そうすると、CSVファイルの1行ずつをコンテキストに対してレコード追加します。作成方法は、INTER-Mediatorのレポジトリにあるサンプルのうち、samples/Sample_webpage/fileuploadCSV_MySQL.html（定義ファイルは同じフォルダのinclude_MySQL.php）を参考にしてください。</p>
                <table>
                    <thead>
                    <tr>
                        <th colspan="2">配列指定</th>
                        <th rowspan="2">値</th>
<th rowspan="2">params.phpで変数名</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td rowspan="7" class="keyword">'import'</td>
                        <td class="keyword">'1st-line'</td>
                        <td>指定なし、あるいはtrueなら1行目をフィールド指定行と見なす。フィールド指定行がない場合には、'フィールド1,フィールド2, ....'といった文字列を指定する</td>
                        <td>$import1stLine</td>
                    </tr>
                    <tr>
                        <td class="keyword">'skip-lines'</td>
                        <td>先頭から指定した数の行数を無視する。指定なしの場合は0と見なす。フィールド指定行は、ここで指定した行数を省いた最初の行と見なす。</td>
                        <td>$importSkipLines</td>
                    </tr>
                    <tr>
                        <td class="keyword">'format'</td>
                        <td>読み込むファイルのフォーマットとして"CSV"あるいは"TSV"を指定する。省略すると"CSV"</td>
                        <td>$importFormat</td>
                    </tr>
                    <tr>
                        <td class="keyword">'use-replace'</td>
                        <td>データベースがMySQLの場合、trueにすると、INSERTではなくREPLACEコマンドを利用してファイルの各行のレコードを挿入あるいは更新する。MySQLでない場合は常にINSERTを利用する。省略するとfalseと見なす。</td>
                        <td>$useReplace</td>
                    </tr>
                    <tr>
                        <td class="keyword">'convert-number'</td>
                        <td>数値変換を行うフィールド名を配列で指定する。</td>
                        <td>$comvert2Number</td>
                    </tr>
                    <tr>
                        <td class="keyword">'convert-date'</td>
                        <td>日付への変換を行うフィールド名を配列で指定する。</td>
                        <td>$comvert2Date</td>
                    </tr>
                    <tr>
                        <td class="keyword">'convert-datetime'</td>
                        <td>日付時刻への変換を行うフィールド名を配列で指定する。</td>
                        <td>$convert2DateTime</td>
                    </tr>
                    </tbody>
                </table>
                <h2>
                    <div class="subtitle">[第2引数, オプション設定]</div>Pusherの設定
                </h2>
                <p>Pusher対応はVer.5までです。</p>
                <table>
                    <thead>
                    <tr>
                        <th colspan="2">配列指定</th>
                        <th rowspan="2">値</th>
<th rowspan="2">params.phpで変数名</th>
                    </tr>
                    <tr>
                        <th class="keyword">第1次元</th>
                        <th class="keyword">第2次元</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td rowspan="3" class="keyword">'pusher'</td>
                        <td class="keyword">'app_id'</td>
                        <td>Pusherで定義したAppのapp_id</td>
                        <td rowspan="3">$pusherParameters</td>
                    </tr>
                    <tr>
                        <td class="keyword">'key'</td>
                        <td>Pusherで定義したAppのkey</td>
                    </tr>
                    <tr>
                        <td class="keyword">'secret'</td>
                        <td>Pusherで定義したAppのsecret</td>
                    </tr>
                    </tbody>
                </table>
                <h2><div class="subtitle">[第2引数, オプション設定]</div>メール送信サーバー</h2>
                <p>メール送信については、<a href="sendmail.html" target="_blank">メール送信(Ver.5)</a>あるいは<a href="sendmail.html" target="_blank">メール送信(Ver.6)</a>のページに記載しました。
                <p>Slackによるメッセージングについては、<a href="slack.html" target="_blank">Slackにメッセージを追加する</a>のページに記載しました。
            </div>
            <p>
                認証についは別項目「ユーザ認証とアクセス権の動作について」も参照してください。
            </p>
            <p>
                browser-compatibilityは、params.phpファイルでも指定できますが、ここに指定をした方が有効になります。この指定に含まれているブラウザで通常処理を行い、含まれていないブラウザでは処理を行わないようにします。
            </p>
            <p>
                以前「trigger」というキーワードを書いていましたが、この設定は不要で、普通にノードに対してJavaScriptの記述をすればいいので、設定としては組み込まないこととします。
            </p>
        </section>
        <section>
            <h1>第3引数、データベースへの接続情報</h1>
            <p>
                データベースヘの接続情報を設定します。この設定を「定義ファイルのデータベース接続設定」と呼ぶことにします。なお、INTER-Mediator.phpと同じフォルダに入れておく「params.php」でも、データベース接続に関する指定が可能です。ページごとに接続情報が違うなら、この引数に指定してもいいのですが、たくさんのファイルで同じ設定ならparams.phpで指定をしてもいいでしょう。さらに、IM_Entry関数の第一パラーメータで指定する配列のコンテキストに対しても設定できます。params.php内で指定できる変数についてもまとめておきます。なお、必要な情報は、データベースクラスごとに異なります。以下の表には、値を必要とするクラスも記述してあります。
            </p>
            <div class="table">
                <table>
                    <tr>
                        <th>
                            インデックス
                        </th>
                        <th>
                            値
                        </th>
                        <th>
                            params.phpで変数名
                        </th>
                    </tr>
                    <tr>
                        <td>
                            'db-class'
                        </td>
                        <td>
                            データアクセスクラスの名前（例：PDO、FileMaker_FX、FileMaker_DataAPI）
                        </td>
                        <td>
                            $dbClass
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'dsn'
                        </td>
                        <td>
                            [PDO]接続時に指定するDSN
                        </td>
                        <td>
                            $dbDSN
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'option'
                        </td>
                        <td>
                            [PDO]オプション指定。array型で指定
                        </td>
                        <td>
                            $dbOption
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'database'
                        </td>
                        <td>
                            [FileMaker_FX][FileMaker_DataAPI]データベース名
                        </td>
                        <td>
                            $dbDatabase
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'user'
                        </td>
                        <td>
                            [PDO][FileMaker_FX][FileMaker_DataAPI]ユーザ名
                        </td>
                        <td>
                            $dbUser
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'password'
                        </td>
                        <td>
                            [PDO][FileMaker_FX][FileMaker_DataAPI]パスワード
                        </td>
                        <td>
                            $dbPassword
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'server'
                        </td>
                        <td>
                            [FileMaker_FX][FileMaker_DataAPI]サーバーアドレス（例：127.0.0.1）
                        </td>
                        <td>
                            $dbServer
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'port'
                        </td>
                        <td>
                            [FileMaker_FX]サーバーポート（例：80）
                        </td>
                        <td>
                            $dbPort
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'protocol'
                        </td>
                        <td>
                            [FileMaker_FX]サーバーへの接続プロトコル（例：HTTP）
                        </td>
                        <td>
                            $dbProtocol
                        </td>
                    </tr>
                    <tr>
                        <td>
                            'datatype'
                        </td>
                        <td>
                            [FileMaker_FX]サーバーがサポートするデータ形式（例：FMPro12）
                        </td>
                        <td>
                            $dbDataType
                        </td>
                    </tr>
                </table>
            </div>
        </section>
        <section>
            <h1>第4引数、デバッグ情報の表示</h1>
            <p>
                数値かfalseかを指定します。false以外だと、デバッグ情報をページの最初に表示します。1ないしは2を指定でき、2の方が多くの情報を出します。
            </p>
        </section>
    </article>
</div>
</body>

</html>